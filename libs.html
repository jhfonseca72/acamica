<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />

    <link
      href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css"
      rel="stylesheet"
    />
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Poppins&display=swap"
      rel="stylesheet"
    />

    <link href="css/products.css" rel="stylesheet" />
    <style>
      body {
        display: flex;
        flex-direction: column;
      }

      .center {
        justify-content: center;
        align-items: center;
        display: flex;
        width: 100%;
        height: 300px;
        border-radius: 2rem;
      }
    </style>
  </head>
  <body>
    <div id="map" class="center animate__animated animate__fadeInLeft"></div>
    <div class="phone-products"></div>

    <script>
      document.documentElement.style.setProperty("--animate-duration", "1s");

      mapboxgl.accessToken =
        "pk.eyJ1IjoiZXhhbXBsZXMiLCJhIjoiY2p1dHRybDR5MGJuZjQzcGhrZ2doeGgwNyJ9.a-vxW4UaxOoUMWUTGnEArw";

      var map = new mapboxgl.Map({
        container: "map",
        style: "mapbox://styles/mapbox/streets-v11",
        center: [-74.0753486, 4.596805],
        zoom: 14,
      });

      /**
            <figure class="product">
                <img src='...' />
                <figcaption>...</figcaption>
            </figure>
      */
      function crearImage(productImage, productName) {
        let figure = document.createElement("figure");
        figure.classList.add("product");

        let img = document.createElement("img");
        img.src = productImage;

        let figureCaption = document.createElement("figcaption");
        figureCaption.textContent = productName;
        figureCaption.style.textAlign = "center";

        figure.appendChild(img);
        figure.appendChild(figureCaption);

        return figure;
      }

      (async function () {
        const {data} = await axios.get(
          "https://601c74da1a9c220017060a09.mockapi.io/api/v1/products"
        );

        console.log(data);
        for (const img of data) {
          const imageElement = crearImage(img.src, img.text);
          document.querySelector(".phone-products").appendChild(imageElement);
        }
      })();
    </script>
  </body>
</html>
